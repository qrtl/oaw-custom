<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="products_categories" inherit_id="website_sale.products_categories" name="Product Categories">
            <xpath expr="//li" position="replace">
                <li t-att-class=" '' if request.session.new_arrival or request.session.special_offer else 'active' ">
                    <a href="/shop/all_products">All Products</a>
                </li>
                <li t-att-class=" '' if not request.session.new_arrival else 'active' " groups="website_timecheck.group_timecheck_light">
                    <a href="/shop/new_arrival">New Arrival</a>
                </li>
                <li t-att-class=" '' if not request.session.special_offer else 'active' ">
                    <a href="/shop/special_offer">Special Offer</a>
                </li>
                <br/>
                <br/>
                <li t-att-class=" '' if request.session.hk_stock or request.session.oversea_stock else 'active' ">
                    <a href="/shop/all_stock">All Stock</a>
                </li>
                <li t-att-class=" '' if not request.session.hk_stock else 'active' ">
                    <a href="/shop/hk_stock">HK Stock</a>
                </li>
                <li t-att-class=" '' if not request.session.oversea_stock else 'active' ">
                    <a href="/shop/oversea_stock">Oversea Stock</a>
                </li>
                <br/>
                <br/>
                <li t-att-class=" '' if category else 'active' ">
                    <a t-att-href="keep('/shop',category=0)">All Categories</a>
                </li>
            </xpath>
        </template>

        <template id="product_extended" name="product_extended" inherit_id="website_multi_image_zoom.product_extended">
            <xpath expr="//div[@id='thumb_img_add']" position="attributes">
                <attribute name="groups">website_timecheck.group_timecheck_light</attribute>
            </xpath>
        </template>

        <template id="products_item" name="Show Stock Quantity" inherit_id="website_sale.products_item">
            <xpath expr="//h5" position="after">
                <div>
                    Internal Code: <span t-field="product.default_code"/><br/>
                    Brand: <span t-field="product.category_name"/>
                </div>
                <div>Stock:
                    <span t-if="product.qty_local_stock and product.qty_overseas">HK, Overseas</span>
                    <span t-if="product.qty_local_stock and not product.qty_overseas">HK</span>
                    <span t-if="not product.qty_local_stock and product.qty_overseas">Overseas</span>
                    <span t-if="not product.qty_local_stock and not product.qty_overseas">N/A</span>
                </div>
            </xpath>
            <xpath expr="//img" position="attributes">
                <attribute name="style">position: static !important; padding: 10px; float: left;</attribute>
                <attribute name="class">hidden-xs img img-responsive</attribute>
            </xpath>
            <xpath expr="//img" position="after">
                <img itemprop="image" class="img img-responsive visible-xs-inline" style="position: static !important; float: left;"
                     t-att-src="website.image_url(product, 'image', None if product_image_big else '300x300')" t-att-alt="product.name"/>
            </xpath>
            <xpath expr="//div[@class='oe_product_image']" position="attributes">
                <attribute name="style">position: static !important; float: left;</attribute>
            </xpath>
            <xpath expr="//section" position="attributes">
                <attribute name="style">position: static !important; float: left; background: none !important;</attribute>
            </xpath>
            <xpath expr="//div[@itemprop='offers']" position="replace">
                <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" class="product_price"
                     t-if="product.product_variant_ids" style="position: static !important;">
                    <t t-if="not product.is_new_arrival">
                        <t t-if="product.qty_overseas != 0 and product.oversea_retail_currency_id != product.company_id.currency_id">
                            <span>Oversea Retail:</span>
                            <span t-esc="'{:,.0f}'.format(product.oversea_retail_price)" style="white-space: nowrap;"/>
                            <span t-field="product.oversea_retail_currency_id.name"/>
                            <br/>
                        </t>
                        <span>HKD Retail:</span>
                        <t t-if="product.qty_overseas != 0 and product.oversea_retail_currency_id == product.company_id.currency_id and product.price &gt; product.oversea_retail_price">
                            <span t-esc="'{:,.0f}'.format(product.oversea_retail_price)" style="white-space: nowrap;"/>
                        </t>
                        <t t-if="product.qty_overseas == 0 or
                                 product.qty_overseas != 0 and product.oversea_retail_currency_id != product.company_id.currency_id or
                                 product.qty_overseas != 0 and product.oversea_retail_currency_id == product.company_id.currency_id and product.price &lt;= product.oversea_retail_price">
                            <span t-esc="'{:,.0f}'.format(product.list_price)" style="white-space: nowrap;"/>
                            <br/>
                        </t>
                        <t t-if="not request.session.special_offer" groups="website_timecheck.group_timecheck_light">
                            <span>Sale HKD:</span>
                            <span t-esc="'{:,.0f}'.format(product.sale_hkd_ac)" style="white-space: nowrap;"/>
                            <br/>
                        </t>
                        <t t-if="request.session.special_offer" groups="website_timecheck.group_timecheck_light">
                            <span style="color: DarkGrey;">Sale HKD:</span>
                            <span t-esc="'{:,.0f}'.format(product.sale_hkd_ac)" style="white-space: nowrap; color: DarkGrey;"/>
                            <br/>
                        </t>
                    </t>
                    <t t-if="request.session.special_offer">
                        <span style="color: red; font-weight:bold;">Special Offer:</span>
                        <span t-esc="'{:,.0f}'.format(product.sale_hkd_ac_so)" style="white-space: nowrap; color: red; font-weight:bold;"/>
                        <span style="color: red; font-weight:bold;">HKD</span>
                        <br/>
                    </t>
                    <input name="product_id" t-att-value="product.product_variant_ids[0].id" type="hidden"/>
                    <a class="btn btn-default btn-xs fa fa-shopping-cart a-submit"/>
                </div>
            </xpath>
        </template>

        <template id="website_sale.product" name="Product">
            <t t-call="website.layout">
                <t t-set="additional_title" t-value="product.name"/>
                <div itemscope="itemscope" itemtype="http://schema.org/Product" id="wrap" class="js_sale">
                    <section
                            t-attf-class="container mt8 oe_website_sale #{(compute_currency(product.lst_price) - product.price) &gt; 0.1 and 'discount'}"
                            id="product_detail">
                        <div class="row">
                            <div class="col-sm-4">
                                <ol class="breadcrumb">
                                    <li>
                                        <a t-att-href="keep(category=0)" onclick="history.go(-1); return false;">
                                            Products
                                        </a>
                                    </li>
                                    <li t-if="category">
                                        <a t-att-href="keep('/shop/category/%s' % slug(category), category=0)"
                                           t-field="category.name"/>
                                    </li>
                                    <li class="active">
                                        <span t-field="product.name"/>
                                    </li>
                                </ol>
                            </div>
                            <div class="col-sm-3">
                                <t t-call="website_sale.search">
                                    <t t-set="search_class">pull-right</t>
                                </t>
                            </div>
                            <div class="col-sm-4" groups="base.group_sale_manager">
                                <t t-call="website.publish_management">
                                    <t t-set="object" t-value="product"/>
                                    <t t-set="publish_edit" t-value="True"/>
                                    <t t-set="action" t-value="'product.product_template_action'"/>
                                </t>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-md-7 col-lg-7">
                                <span itemprop="image" t-field="product.image"
                                      t-field-options='{"widget": "image", "class": "product_detail_img", "alt-field": "name"}'/>
                            </div>
                            <div class="col-sm-5 col-md-5 col-lg-4 col-lg-offset-1">
                                <h1 itemprop="name" t-field="product.name">Product Name</h1>
                                <span itemprop="url" style="display:none;" t-esc="'/shop/product/%s' % slug(product)"/>

                                <form t-att-action="keep('/shop/cart/update')" class="js_add_cart_variants"
                                      t-att-data-attribute_value_ids="product.product_variant_ids.ids" method="POST">

                                    <div class="js_product">
                                        <t t-placeholder="select">
                                            <input type="hidden" class="product_id" name="product_id"
                                                   t-att-value="int(product.product_variant_ids[0]) if len(product.product_variant_ids) == 1 else '0'"/>
                                            <t t-call="website_sale.variants">
                                                <t t-set="ul_class" t-value="'nav-stacked'"/>
                                            </t>
                                        </t>

                                        <t t-call="website_sale.product_price"/>
                                        <p t-if="len(product.product_variant_ids) > 1"
                                           class="css_not_available_msg bg-danger" style="padding: 15px;">Product not
                                            available
                                        </p>

                                        <a id="add_to_cart" class="btn btn-primary btn-lg mt8 js_check_product a-submit"
                                           href="#">Add to Cart
                                        </a>
                                    </div>

                                </form>

                                <hr t-if="product.description_sale"/>
                                <div>
                                    <p t-field="product.description_sale" class="text-muted"/>
                                </div>
                                <hr/>
                                <a href="/shop" class="btn btn-default mb32">Back to Shop</a>
                            </div>
                        </div>
                    </section>
                    <div itemprop="description" t-field="product.website_description" class="oe_structure mt16"
                         id="product_full_description"/>

                </div>
            </t>
        </template>

        <template id="product" name="Product" inherit_id="website_sale.product">
            <xpath expr="//h1" position="after">
                <h4>Internal Code: <span t-field="product.default_code"/></h4>
                <h4>Brand: <span t-field="product.category_name"/></h4>
            </xpath>
            <xpath expr="//form" position="before">
                <div>
                    <h4>
                        Stock:
                        <span t-if="product.qty_local_stock and product.qty_overseas">HK, Overseas</span>
                        <span t-if="product.qty_local_stock and not product.qty_overseas">HK</span>
                        <span t-if="not product.qty_local_stock and product.qty_overseas">Overseas</span>
                        <span t-if="not product.qty_local_stock and not product.qty_overseas">N/A</span>
                    </h4>
                </div>
            </xpath>
        </template>

        <template id="product_price" name="Product Price" inherit_id="website_sale.product_price">
            <xpath expr="//h4[@class='oe_price_h4 css_editable_mode_hidden decimal_precision']" position="replace">
                <h4 class="oe_price_h4 css_editable_mode_hidden decimal_precision"
                    t-att-data-precision="user_id.partner_id.property_product_pricelist.currency_id.rounding">
                    <t t-if="not product.is_new_arrival">
                        <t t-if="product.qty_overseas != 0 and product.oversea_retail_currency_id != product.company_id.currency_id">
                            <span>Oversea Retail:</span>
                            <span t-esc="'{:,.0f}'.format(product.oversea_retail_price)" style="white-space: nowrap;"/>
                            <span t-field="product.oversea_retail_currency_id.name"/>
                            <br/>
                        </t>
                        <span>HKD Retail:</span>
                        <t t-if="product.qty_overseas != 0 and product.oversea_retail_currency_id == product.company_id.currency_id and product.price &gt; product.oversea_retail_price">
                            <span t-esc="'{:,.0f}'.format(product.oversea_retail_price)" style="white-space: nowrap;"/>
                        </t>
                        <t t-if="product.qty_overseas == 0 or
                                 product.qty_overseas != 0 and product.oversea_retail_currency_id != product.company_id.currency_id or
                                 product.qty_overseas != 0 and product.oversea_retail_currency_id == product.company_id.currency_id and product.price &lt;= product.oversea_retail_price">
                            <span t-esc="'{:,.0f}'.format(product.list_price)" style="white-space: nowrap;"/>
                            <br/>
                        </t>
                        <t t-if="not request.session.special_offer" groups="website_timecheck.group_timecheck_light">
                            <span>Sale HKD:</span>
                            <span t-esc="'{:,.0f}'.format(product.sale_hkd_ac)" style="white-space: nowrap;"/>
                            <br/>
                        </t>
                        <t t-if="request.session.special_offer" groups="website_timecheck.group_timecheck_light">
                            <span style="color: DarkGrey;">Sale HKD:</span>
                            <span t-esc="'{:,.0f}'.format(product.sale_hkd_ac)" style="white-space: nowrap; color: DarkGrey;"/>
                            <br/>
                        </t>
                    </t>
                    <t t-if="request.session.special_offer">
                        <span style="color: red; font-weight:bold;">Special Offer:</span>
                        <span t-esc="'{:,.0f}'.format(product.sale_hkd_ac_so)" style="white-space: nowrap; color: red; font-weight:bold;"/>
                        <span style="color: red; font-weight:bold;">HKD</span>
                        <br/>
                    </t>

                    <span itemprop="price" style="display:none;" t-esc="product.price"/>
                    <span itemprop="priceCurrency" style="display:none;" t-esc="user_id.partner_id.property_product_pricelist.currency_id.name" class='decimal_precision' t-att-data-precision="website.pricelist_id.currency_id.rounding"/>
                </h4>
            </xpath>
        </template>

        <template id="cart" name="Shopping Cart" inherit_id="website_sale.cart">
            <xpath expr="//th[@t-att-data-precision='website_sale_order.pricelist_id.currency_id.rounding']" position="attributes">
                <attribute name="t-if">not website_sale_order.is_mto</attribute>
            </xpath>
            <xpath expr="//td[@name='price']" position="attributes">
                <attribute name="t-if">not line.order_id.is_mto</attribute>
            </xpath>
            <xpath expr="//thead/tr" position="inside">
                <th width="100" groups="website_timecheck.group_timecheck_light" class="decimal_precision">Sale HKD</th>
            </xpath>
            <xpath expr="//tbody//tr" position="inside">
                <td class="text-center">
                    <span t-esc="'{:,.0f}'.format(line.product_id.sale_hkd_ac)" style="white-space: nowrap;"/>
                </td>
            </xpath>

            <xpath expr="//table[@id='cart_products']" position="after">
                <form action="/cart/update_payment_delivery_info" method="post">
                    <div class="row">
                        <div class="form-group col-lg-6">
                            <label class="control-label" for="payment_method">Payment Method</label>
                            <select name="payment_method" class="form-control">
                                <option value="cash" t-att-selected="'cash' == website_sale_order.payment_method">Cash</option>
                                <option value="china_bank_transfer" t-att-selected="'china_bank_transfer' == website_sale_order.payment_method">China Bank Transfer</option>
                                <option value="hk_bank_cheque" t-att-selected="'hk_bank_cheque' == website_sale_order.payment_method">Hong Kong Banks' Cheque</option>
                                <option value="direct_bank_transfer" t-att-selected="'direct_bank_transfer' == website_sale_order.payment_method">Bank Transfer to our HK company</option>
                                <option value="visa_union_pay" t-att-selected="'visa_union_pay' == website_sale_order.payment_method">Visa or Union (Extra 2.2% as fee)</option>
                                <option value="other" t-att-selected="'other' == website_sale_order.payment_method">Other Payment Method</option>
                            </select>
                        </div>
                        <div class="form-group col-lg-6">
                            <label class="control-label" for="payment_desc">Other Payment Method</label>
                            <input type="text" name="payment_desc" class="form-control" t-att-value="website_sale_order.payment_desc"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-lg-6">
                            <label class="control-label" for="picking_date">Desire Picking Date (Delivery：Monday to Friday 15:00-18:00)</label>
                            <input type="date" name="picking_date" class="form-control" t-att-value="website_sale_order.picking_date"/>
                        </div>
                        <div class="form-group col-lg-6">
                            <label class="control-label" for="other_inquiry">Other Inquiry</label>
                            <input type="text" name="other_inquiry" class="form-control" t-att-value="website_sale_order.other_inquiry"/>
                        </div>
                    </div>
                    <div class="clearfix">
                        <a class="btn btn-default btn-primary pull-right mb32 a-submit">Confirm and Submit <span class="fa fa-long-arrow-right"/></a>
                    </div>
                </form>
            </xpath>
            <xpath expr="//div[@id='right_column']" position="attributes">
                <attribute name="style">display: none;</attribute>
            </xpath>
            <xpath expr="//div[@class='col-md-8 col-sm-9 oe_cart']" position="attributes">
                <attribute name="class">oe_cart</attribute>
            </xpath>

        </template>

        <template id="total" name="total" inherit_id="website_sale.total">
            <xpath expr="//table" position="attributes">
                <attribute name="t-if">website_sale_order and not website_sale_order.is_mto</attribute>
            </xpath>
        </template>

        <template id="confirmation">
            <t t-call="website.layout">
                <t t-set="additional_title">Order - Submitted</t>
                <div id="wrap">
                    <div class="container oe_website_sale">
                        <h1 class="mb32">Order
                            <em t-field="order.name"/>
                            Submitted
                        </h1>
                        <div class="row">
                            <div class="col-md-8 oe_cart">
                                <h2>We will contact you soon.</h2>
                                <a href="/shop" class="btn btn-default mb32">Continue Shopping</a>
                                <div class="oe_website_sale_tx_status" t-att-data-order-id="order.id">
                                </div>
                                <div class="clearfix"/>
                                <div class="oe_structure"/>
                            </div>
                        </div>

                    </div>
                    <div class="oe_structure"/>
                </div>

            </t>
        </template>

        <template id="website_sale.products" name="Products">
            <t t-call="website.layout">
                <t t-set="additional_title">Shop</t>
                <div id="wrap" class="js_sale">
                    <div class="oe_structure"/>
                    <div class="container oe_website_sale">
                        <div class="products_pager">
                            <div class="row" style="width: 100%;">
                                <t t-call="website_sale.search">
                                    <t t-set="search_class">pagination form-inline col-md-3</t>
                                </t>
                                <t t-call="website.pager"/>
                            </div>
                        </div>
                        <div class='row'>
                            <div class="hidden" id="products_grid_before"></div>
                            <div class="col-md-12" id="products_grid">
                                <table width="100%">
                                    <tbody>
                                        <tr t-ignore="true">
                                            <td t-foreach="range(0,rows)" t-as="row" t-attf-width="#{100/rows}%"></td>
                                        </tr>
                                        <tr t-foreach="bins" t-as="tr_product">
                                            <t t-foreach="tr_product" t-as="td_product">
                                                <t t-if="td_product">
                                                    <t t-set="product" t-value="td_product['product']"/>
                                                    <td t-att-colspan="td_product['x'] != 1 and td_product['x']"
                                                        t-att-rowspan="td_product['y'] != 1 and td_product['y']"
                                                        t-attf-class="oe_product oe_grid oe-height-#{td_product['y']*2} #{ td_product['class'] }"
                                                        style="height: 100% !important;">

                                                        <div class="oe_product_cart"
                                                             t-att-data-publish="product.website_published and 'on' or 'off'">

                                                            <div class="css_options" t-ignore="true"
                                                                 groups="base.group_website_publisher">
                                                                <div t-attf-class="dropdown js_options"
                                                                     t-att-data-id="product.id">
                                                                    <button class="btn btn-default"
                                                                            t-att-id="'dopprod-%s' % product.id"
                                                                            role="button" data-toggle="dropdown">Options
                                                                        <span class="caret"></span>
                                                                    </button>
                                                                    <ul class="dropdown-menu" role="menu"
                                                                        t-att-aria-labelledby="'dopprod-%s' % product.id">
                                                                        <li class='dropdown-submenu'>
                                                                            <a tabindex="-1" href="#">Size</a>
                                                                            <ul class="dropdown-menu" name="size">
                                                                                <li>
                                                                                    <a href="#">
                                                                                        <table>
                                                                                            <tr>
                                                                                                <td class="selected"></td>
                                                                                                <td t-att-class="product.website_size_x > 1 and 'selected'"></td>
                                                                                                <td t-att-class="product.website_size_x > 2 and 'selected'"></td>
                                                                                                <td t-att-class="product.website_size_x > 3 and 'selected'"></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td t-att-class="product.website_size_y > 1 and 'selected'"></td>
                                                                                                <td t-att-class="product.website_size_y > 1 and product.website_size_x > 1 and 'selected'"></td>
                                                                                                <td t-att-class="product.website_size_y > 1 and product.website_size_x > 2 and 'selected'"></td>
                                                                                                <td t-att-class="product.website_size_y > 1 and product.website_size_x > 3 and 'selected'"></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td t-att-class="product.website_size_y > 2 and 'selected'"></td>
                                                                                                <td t-att-class="product.website_size_y > 2 and product.website_size_x > 1 and 'selected'"></td>
                                                                                                <td t-att-class="product.website_size_y > 2 and product.website_size_x > 2 and 'selected'"></td>
                                                                                                <td t-att-class="product.website_size_y > 2 and product.website_size_x > 3 and 'selected'"></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td t-att-class="product.website_size_y > 3 and 'selected'"></td>
                                                                                                <td t-att-class="product.website_size_y > 3 and product.website_size_x > 1 and 'selected'"></td>
                                                                                                <td t-att-class="product.website_size_y > 3 and product.website_size_x > 2 and 'selected'"></td>
                                                                                                <td t-att-class="product.website_size_y > 3 and product.website_size_x > 3 and 'selected'"></td>
                                                                                            </tr>
                                                                                        </table>
                                                                                    </a>
                                                                                </li>
                                                                            </ul>
                                                                        </li>
                                                                        <li class='dropdown-submenu'>
                                                                            <a tabindex="-1" href="#">Styles</a>
                                                                            <ul class="dropdown-menu" name="style">
                                                                                <t t-foreach="styles" t-as="style">
                                                                                    <li t-att-class="style_in_product(style, product) and 'active' or ''">
                                                                                        <a href="#"
                                                                                           t-att-data-id="style.id"
                                                                                           t-att-data-class="style.html_class">
                                                                                            <t t-esc="style.name"/>
                                                                                        </a>
                                                                                    </li>
                                                                                </t>
                                                                            </ul>
                                                                        </li>
                                                                        <li class='dropdown-submenu'>
                                                                            <a tabindex="-1" href="#">Promote</a>
                                                                            <ul class="dropdown-menu" name="sequence">
                                                                                <li>
                                                                                    <a href="#" class="js_go_to_top">
                                                                                        Push to top
                                                                                    </a>
                                                                                </li>
                                                                                <li>
                                                                                    <a href="#" class="js_go_up">Push
                                                                                        up
                                                                                    </a>
                                                                                </li>
                                                                                <li>
                                                                                    <a href="#" class="js_go_down">Push
                                                                                        down
                                                                                    </a>
                                                                                </li>
                                                                                <li>
                                                                                    <a href="#" class="js_go_to_bottom">
                                                                                        Push to bottom
                                                                                    </a>
                                                                                </li>
                                                                            </ul>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                            <t t-set="product_image_big"
                                                               t-value="td_product['x']+td_product['y'] > 2"/>
                                                            <t t-call="website_sale.products_item"/>
                                                        </div>

                                                    </td>
                                                </t>
                                                <td t-if="not td_product" class="oe-height-2"/>
                                            </t>
                                        </tr>
                                    </tbody>
                                </table>
                                <t t-if="not bins">
                                    <div class="text-center text-muted">
                                        <h3 class="css_editable_display">No product defined.</h3>
                                        <t groups="base.group_website_publisher">
                                            <p groups="base.group_sale_manager">Use the <i>'Content'</i> top menu to
                                                create a new product.
                                            </p>
                                        </t>
                                    </div>
                                </t>
                            </div>
                        </div>
                        <div class="products_pager">
                            <t t-call="website.pager"/>
                        </div>
                    </div>
                    <div class="oe_structure mb32"/>
                </div>
            </t>
        </template>

    </data>
</odoo>
